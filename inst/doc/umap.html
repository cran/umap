<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>

<title>Introduction</title>

<script type="text/javascript">
window.onload = function() {
  var imgs = document.getElementsByTagName('img'), i, img;
  for (i = 0; i < imgs.length; i++) {
    img = imgs[i];
    // center an image if it is the only element of its parent
    if (img.parentElement.childElementCount === 1)
      img.parentElement.style.textAlign = 'center';
  }
};
</script>

<!-- Styles for R syntax highlighter -->
<style type="text/css">
   pre .operator,
   pre .paren {
     color: rgb(104, 118, 135)
   }

   pre .literal {
     color: #990073
   }

   pre .number {
     color: #099;
   }

   pre .comment {
     color: #998;
     font-style: italic
   }

   pre .keyword {
     color: #900;
     font-weight: bold
   }

   pre .identifier {
     color: rgb(0, 0, 0);
   }

   pre .string {
     color: #d14;
   }
</style>

<!-- R syntax highlighter -->
<script type="text/javascript">
var hljs=new function(){function m(p){return p.replace(/&/gm,"&amp;").replace(/</gm,"&lt;")}function f(r,q,p){return RegExp(q,"m"+(r.cI?"i":"")+(p?"g":""))}function b(r){for(var p=0;p<r.childNodes.length;p++){var q=r.childNodes[p];if(q.nodeName=="CODE"){return q}if(!(q.nodeType==3&&q.nodeValue.match(/\s+/))){break}}}function h(t,s){var p="";for(var r=0;r<t.childNodes.length;r++){if(t.childNodes[r].nodeType==3){var q=t.childNodes[r].nodeValue;if(s){q=q.replace(/\n/g,"")}p+=q}else{if(t.childNodes[r].nodeName=="BR"){p+="\n"}else{p+=h(t.childNodes[r])}}}if(/MSIE [678]/.test(navigator.userAgent)){p=p.replace(/\r/g,"\n")}return p}function a(s){var r=s.className.split(/\s+/);r=r.concat(s.parentNode.className.split(/\s+/));for(var q=0;q<r.length;q++){var p=r[q].replace(/^language-/,"");if(e[p]){return p}}}function c(q){var p=[];(function(s,t){for(var r=0;r<s.childNodes.length;r++){if(s.childNodes[r].nodeType==3){t+=s.childNodes[r].nodeValue.length}else{if(s.childNodes[r].nodeName=="BR"){t+=1}else{if(s.childNodes[r].nodeType==1){p.push({event:"start",offset:t,node:s.childNodes[r]});t=arguments.callee(s.childNodes[r],t);p.push({event:"stop",offset:t,node:s.childNodes[r]})}}}}return t})(q,0);return p}function k(y,w,x){var q=0;var z="";var s=[];function u(){if(y.length&&w.length){if(y[0].offset!=w[0].offset){return(y[0].offset<w[0].offset)?y:w}else{return w[0].event=="start"?y:w}}else{return y.length?y:w}}function t(D){var A="<"+D.nodeName.toLowerCase();for(var B=0;B<D.attributes.length;B++){var C=D.attributes[B];A+=" "+C.nodeName.toLowerCase();if(C.value!==undefined&&C.value!==false&&C.value!==null){A+='="'+m(C.value)+'"'}}return A+">"}while(y.length||w.length){var v=u().splice(0,1)[0];z+=m(x.substr(q,v.offset-q));q=v.offset;if(v.event=="start"){z+=t(v.node);s.push(v.node)}else{if(v.event=="stop"){var p,r=s.length;do{r--;p=s[r];z+=("</"+p.nodeName.toLowerCase()+">")}while(p!=v.node);s.splice(r,1);while(r<s.length){z+=t(s[r]);r++}}}}return z+m(x.substr(q))}function j(){function q(x,y,v){if(x.compiled){return}var u;var s=[];if(x.k){x.lR=f(y,x.l||hljs.IR,true);for(var w in x.k){if(!x.k.hasOwnProperty(w)){continue}if(x.k[w] instanceof Object){u=x.k[w]}else{u=x.k;w="keyword"}for(var r in u){if(!u.hasOwnProperty(r)){continue}x.k[r]=[w,u[r]];s.push(r)}}}if(!v){if(x.bWK){x.b="\\b("+s.join("|")+")\\s"}x.bR=f(y,x.b?x.b:"\\B|\\b");if(!x.e&&!x.eW){x.e="\\B|\\b"}if(x.e){x.eR=f(y,x.e)}}if(x.i){x.iR=f(y,x.i)}if(x.r===undefined){x.r=1}if(!x.c){x.c=[]}x.compiled=true;for(var t=0;t<x.c.length;t++){if(x.c[t]=="self"){x.c[t]=x}q(x.c[t],y,false)}if(x.starts){q(x.starts,y,false)}}for(var p in e){if(!e.hasOwnProperty(p)){continue}q(e[p].dM,e[p],true)}}function d(B,C){if(!j.called){j();j.called=true}function q(r,M){for(var L=0;L<M.c.length;L++){if((M.c[L].bR.exec(r)||[null])[0]==r){return M.c[L]}}}function v(L,r){if(D[L].e&&D[L].eR.test(r)){return 1}if(D[L].eW){var M=v(L-1,r);return M?M+1:0}return 0}function w(r,L){return L.i&&L.iR.test(r)}function K(N,O){var M=[];for(var L=0;L<N.c.length;L++){M.push(N.c[L].b)}var r=D.length-1;do{if(D[r].e){M.push(D[r].e)}r--}while(D[r+1].eW);if(N.i){M.push(N.i)}return f(O,M.join("|"),true)}function p(M,L){var N=D[D.length-1];if(!N.t){N.t=K(N,E)}N.t.lastIndex=L;var r=N.t.exec(M);return r?[M.substr(L,r.index-L),r[0],false]:[M.substr(L),"",true]}function z(N,r){var L=E.cI?r[0].toLowerCase():r[0];var M=N.k[L];if(M&&M instanceof Array){return M}return false}function F(L,P){L=m(L);if(!P.k){return L}var r="";var O=0;P.lR.lastIndex=0;var M=P.lR.exec(L);while(M){r+=L.substr(O,M.index-O);var N=z(P,M);if(N){x+=N[1];r+='<span class="'+N[0]+'">'+M[0]+"</span>"}else{r+=M[0]}O=P.lR.lastIndex;M=P.lR.exec(L)}return r+L.substr(O,L.length-O)}function J(L,M){if(M.sL&&e[M.sL]){var r=d(M.sL,L);x+=r.keyword_count;return r.value}else{return F(L,M)}}function I(M,r){var L=M.cN?'<span class="'+M.cN+'">':"";if(M.rB){y+=L;M.buffer=""}else{if(M.eB){y+=m(r)+L;M.buffer=""}else{y+=L;M.buffer=r}}D.push(M);A+=M.r}function G(N,M,Q){var R=D[D.length-1];if(Q){y+=J(R.buffer+N,R);return false}var P=q(M,R);if(P){y+=J(R.buffer+N,R);I(P,M);return P.rB}var L=v(D.length-1,M);if(L){var O=R.cN?"</span>":"";if(R.rE){y+=J(R.buffer+N,R)+O}else{if(R.eE){y+=J(R.buffer+N,R)+O+m(M)}else{y+=J(R.buffer+N+M,R)+O}}while(L>1){O=D[D.length-2].cN?"</span>":"";y+=O;L--;D.length--}var r=D[D.length-1];D.length--;D[D.length-1].buffer="";if(r.starts){I(r.starts,"")}return R.rE}if(w(M,R)){throw"Illegal"}}var E=e[B];var D=[E.dM];var A=0;var x=0;var y="";try{var s,u=0;E.dM.buffer="";do{s=p(C,u);var t=G(s[0],s[1],s[2]);u+=s[0].length;if(!t){u+=s[1].length}}while(!s[2]);if(D.length>1){throw"Illegal"}return{r:A,keyword_count:x,value:y}}catch(H){if(H=="Illegal"){return{r:0,keyword_count:0,value:m(C)}}else{throw H}}}function g(t){var p={keyword_count:0,r:0,value:m(t)};var r=p;for(var q in e){if(!e.hasOwnProperty(q)){continue}var s=d(q,t);s.language=q;if(s.keyword_count+s.r>r.keyword_count+r.r){r=s}if(s.keyword_count+s.r>p.keyword_count+p.r){r=p;p=s}}if(r.language){p.second_best=r}return p}function i(r,q,p){if(q){r=r.replace(/^((<[^>]+>|\t)+)/gm,function(t,w,v,u){return w.replace(/\t/g,q)})}if(p){r=r.replace(/\n/g,"<br>")}return r}function n(t,w,r){var x=h(t,r);var v=a(t);var y,s;if(v){y=d(v,x)}else{return}var q=c(t);if(q.length){s=document.createElement("pre");s.innerHTML=y.value;y.value=k(q,c(s),x)}y.value=i(y.value,w,r);var u=t.className;if(!u.match("(\\s|^)(language-)?"+v+"(\\s|$)")){u=u?(u+" "+v):v}if(/MSIE [678]/.test(navigator.userAgent)&&t.tagName=="CODE"&&t.parentNode.tagName=="PRE"){s=t.parentNode;var p=document.createElement("div");p.innerHTML="<pre><code>"+y.value+"</code></pre>";t=p.firstChild.firstChild;p.firstChild.cN=s.cN;s.parentNode.replaceChild(p.firstChild,s)}else{t.innerHTML=y.value}t.className=u;t.result={language:v,kw:y.keyword_count,re:y.r};if(y.second_best){t.second_best={language:y.second_best.language,kw:y.second_best.keyword_count,re:y.second_best.r}}}function o(){if(o.called){return}o.called=true;var r=document.getElementsByTagName("pre");for(var p=0;p<r.length;p++){var q=b(r[p]);if(q){n(q,hljs.tabReplace)}}}function l(){if(window.addEventListener){window.addEventListener("DOMContentLoaded",o,false);window.addEventListener("load",o,false)}else{if(window.attachEvent){window.attachEvent("onload",o)}else{window.onload=o}}}var e={};this.LANGUAGES=e;this.highlight=d;this.highlightAuto=g;this.fixMarkup=i;this.highlightBlock=n;this.initHighlighting=o;this.initHighlightingOnLoad=l;this.IR="[a-zA-Z][a-zA-Z0-9_]*";this.UIR="[a-zA-Z_][a-zA-Z0-9_]*";this.NR="\\b\\d+(\\.\\d+)?";this.CNR="\\b(0[xX][a-fA-F0-9]+|(\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)";this.BNR="\\b(0b[01]+)";this.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|\\.|-|-=|/|/=|:|;|<|<<|<<=|<=|=|==|===|>|>=|>>|>>=|>>>|>>>=|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~";this.ER="(?![\\s\\S])";this.BE={b:"\\\\.",r:0};this.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[this.BE],r:0};this.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[this.BE],r:0};this.CLCM={cN:"comment",b:"//",e:"$"};this.CBLCLM={cN:"comment",b:"/\\*",e:"\\*/"};this.HCM={cN:"comment",b:"#",e:"$"};this.NM={cN:"number",b:this.NR,r:0};this.CNM={cN:"number",b:this.CNR,r:0};this.BNM={cN:"number",b:this.BNR,r:0};this.inherit=function(r,s){var p={};for(var q in r){p[q]=r[q]}if(s){for(var q in s){p[q]=s[q]}}return p}}();hljs.LANGUAGES.cpp=function(){var a={keyword:{"false":1,"int":1,"float":1,"while":1,"private":1,"char":1,"catch":1,"export":1,virtual:1,operator:2,sizeof:2,dynamic_cast:2,typedef:2,const_cast:2,"const":1,struct:1,"for":1,static_cast:2,union:1,namespace:1,unsigned:1,"long":1,"throw":1,"volatile":2,"static":1,"protected":1,bool:1,template:1,mutable:1,"if":1,"public":1,friend:2,"do":1,"return":1,"goto":1,auto:1,"void":2,"enum":1,"else":1,"break":1,"new":1,extern:1,using:1,"true":1,"class":1,asm:1,"case":1,typeid:1,"short":1,reinterpret_cast:2,"default":1,"double":1,register:1,explicit:1,signed:1,typename:1,"try":1,"this":1,"switch":1,"continue":1,wchar_t:1,inline:1,"delete":1,alignof:1,char16_t:1,char32_t:1,constexpr:1,decltype:1,noexcept:1,nullptr:1,static_assert:1,thread_local:1,restrict:1,_Bool:1,complex:1},built_in:{std:1,string:1,cin:1,cout:1,cerr:1,clog:1,stringstream:1,istringstream:1,ostringstream:1,auto_ptr:1,deque:1,list:1,queue:1,stack:1,vector:1,map:1,set:1,bitset:1,multiset:1,multimap:1,unordered_set:1,unordered_map:1,unordered_multiset:1,unordered_multimap:1,array:1,shared_ptr:1}};return{dM:{k:a,i:"</",c:[hljs.CLCM,hljs.CBLCLM,hljs.QSM,{cN:"string",b:"'\\\\?.",e:"'",i:"."},{cN:"number",b:"\\b(\\d+(\\.\\d*)?|\\.\\d+)(u|U|l|L|ul|UL|f|F)"},hljs.CNM,{cN:"preprocessor",b:"#",e:"$"},{cN:"stl_container",b:"\\b(deque|list|queue|stack|vector|map|set|bitset|multiset|multimap|unordered_map|unordered_set|unordered_multiset|unordered_multimap|array)\\s*<",e:">",k:a,r:10,c:["self"]}]}}}();hljs.LANGUAGES.r={dM:{c:[hljs.HCM,{cN:"number",b:"\\b0[xX][0-9a-fA-F]+[Li]?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+(?:[eE][+\\-]?\\d*)?L\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\b\\d+\\.(?!\\d)(?:i\\b)?",e:hljs.IMMEDIATE_RE,r:1},{cN:"number",b:"\\b\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"number",b:"\\.\\d+(?:[eE][+\\-]?\\d*)?i?\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"keyword",b:"(?:tryCatch|library|setGeneric|setGroupGeneric)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\.",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\.\\.\\d+(?![\\w.])",e:hljs.IMMEDIATE_RE,r:10},{cN:"keyword",b:"\\b(?:function)",e:hljs.IMMEDIATE_RE,r:2},{cN:"keyword",b:"(?:if|in|break|next|repeat|else|for|return|switch|while|try|stop|warning|require|attach|detach|source|setMethod|setClass)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"literal",b:"(?:NA|NA_integer_|NA_real_|NA_character_|NA_complex_)\\b",e:hljs.IMMEDIATE_RE,r:10},{cN:"literal",b:"(?:NULL|TRUE|FALSE|T|F|Inf|NaN)\\b",e:hljs.IMMEDIATE_RE,r:1},{cN:"identifier",b:"[a-zA-Z.][a-zA-Z0-9._]*\\b",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"<\\-(?!\\s*\\d)",e:hljs.IMMEDIATE_RE,r:2},{cN:"operator",b:"\\->|<\\-",e:hljs.IMMEDIATE_RE,r:1},{cN:"operator",b:"%%|~",e:hljs.IMMEDIATE_RE},{cN:"operator",b:">=|<=|==|!=|\\|\\||&&|=|\\+|\\-|\\*|/|\\^|>|<|!|&|\\||\\$|:",e:hljs.IMMEDIATE_RE,r:0},{cN:"operator",b:"%",e:"%",i:"\\n",r:1},{cN:"identifier",b:"`",e:"`",r:0},{cN:"string",b:'"',e:'"',c:[hljs.BE],r:0},{cN:"string",b:"'",e:"'",c:[hljs.BE],r:0},{cN:"paren",b:"[[({\\])}]",e:hljs.IMMEDIATE_RE,r:0}]}};
hljs.initHighlightingOnLoad();
</script>



<style type="text/css">
body, td {
   font-family: sans-serif;
   background-color: white;
   font-size: 13px;
}

body {
  max-width: 800px;
  margin: auto;
  padding: 1em;
  line-height: 20px;
}

tt, code, pre {
   font-family: 'DejaVu Sans Mono', 'Droid Sans Mono', 'Lucida Console', Consolas, Monaco, monospace;
}

h1 {
   font-size:2.2em;
}

h2 {
   font-size:1.8em;
}

h3 {
   font-size:1.4em;
}

h4 {
   font-size:1.0em;
}

h5 {
   font-size:0.9em;
}

h6 {
   font-size:0.8em;
}

a:visited {
   color: rgb(50%, 0%, 50%);
}

pre, img {
  max-width: 100%;
}
pre {
  overflow-x: auto;
}
pre code {
   display: block; padding: 0.5em;
}

code {
  font-size: 92%;
  border: 1px solid #ccc;
}

code[class] {
  background-color: #F8F8F8;
}

table, td, th {
  border: none;
}

blockquote {
   color:#666666;
   margin:0;
   padding-left: 1em;
   border-left: 0.5em #EEE solid;
}

hr {
   height: 0px;
   border-bottom: none;
   border-top-width: thin;
   border-top-style: dotted;
   border-top-color: #999999;
}

@media print {
   * {
      background: transparent !important;
      color: black !important;
      filter:none !important;
      -ms-filter: none !important;
   }

   body {
      font-size:12pt;
      max-width:100%;
   }

   a, a:visited {
      text-decoration: underline;
   }

   hr {
      visibility: hidden;
      page-break-before: always;
   }

   pre, blockquote {
      padding-right: 1em;
      page-break-inside: avoid;
   }

   tr, img {
      page-break-inside: avoid;
   }

   img {
      max-width: 100% !important;
   }

   @page :left {
      margin: 15mm 20mm 15mm 10mm;
   }

   @page :right {
      margin: 15mm 10mm 15mm 20mm;
   }

   p, h2, h3 {
      orphans: 3; widows: 3;
   }

   h2, h3 {
      page-break-after: avoid;
   }
}
</style>



</head>

<body>
<style>
h1.title {
  margin-top: 1em;
  margin-bottom: 1.5em;
}
h2, h3 {
  margin-top: 2em;
  margin-bottom: 0.7em;
}
p {
  font-size: 18px;
  margin-bottom: 0.7em;
}
pre {
  font-size: 16px;
  line-height: 1.5;
}
</style>

<h2>Introduction</h2>

<p>Uniform Manifold Approximation and Projection (UMAP) is an algorithm for dimensional reduction proposed by <a href="https://arxiv.org/abs/1802.03426">McInnes and Healy</a>. This vignette demonstrates how to use the <code>umap</code> R package to perform dimensional reduction and visualization with the UMAP method.</p>

<h2>Usage</h2>

<p>For a practical demonstration, let&#39;s use the Iris dataset. This dataset is accessible through object <code>iris</code>.</p>

<pre><code class="r">head(iris, 3)
</code></pre>

<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa
</code></pre>

<p>The first four columns contain data, the last column contains a label. It will be useful to 
separate those components.</p>

<pre><code class="r">iris.data = iris[, grep(&quot;Sepal|Petal&quot;, colnames(iris))]
iris.labels = iris[, &quot;Species&quot;]
</code></pre>

<p>Now, let&#39;s load the <code>umap</code> package and apply the UMAP transformation.</p>

<pre><code class="r">library(umap)
iris.umap = umap(iris.data)
</code></pre>

<p>The output is here an object <code>iris.umap</code>. We can get a minimal summary of its contents by just printing it.</p>

<pre><code class="r">iris.umap
</code></pre>

<pre><code>## umap embedding of 150 items in 2 dimensions
## object components: layout, knn, config
</code></pre>

<p>The main component of the object is <code>layout</code>, which holds a matrix with coordinates.</p>

<pre><code class="r">head(iris.umap$layout, 3)
</code></pre>

<pre><code>##           [,1]      [,2]
## [1,] 2.3576047 -5.290552
## [2,] 1.0353754 -7.342834
## [3,] 0.9800537 -6.799518
</code></pre>

<p>We can now use these coordinates to visualize the dataset. (The custom plot function, <code>plot.iris</code>, is available at the end of this vignette.)</p>

<pre><code class="r">plot.iris(iris.umap, iris.labels)
</code></pre>

<p><img src="data:image/png;base64,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" alt="plot of chunk unnamed-chunk-4"/></p>

<p>The layout conveys separation between the groups and dispersion within the group. While this vignette example is simple by construction, the <code>umap</code> package can provide similar visualizations for larger datasets with many thousands of data points. </p>

<h2>Tuning UMAP</h2>

<p>The example above uses function <code>umap</code> with a single argument - the input dataset - so the embedding is performed with default settings. However, the algorithm can be tuned in several ways. There are two strategies for tuning: via configuration objects and via additional arguments.</p>

<h3>Configuration objects</h3>

<p>The default configuration object is called <code>umap.defaults</code>. This is a list encoding default values for all the parameters used within the algorithm.</p>

<pre><code class="r">umap.defaults
</code></pre>

<pre><code>## umap configuration parameters
##            n.neighbors: 15
##           n.components: 2
##        metric.function: euclidean
##               n.epochs: 200
##                  input: data
##                   init: spectral
##               min.dist: 0.1
##       set.op.mix.ratio: 1
##     local.connectivity: 1
##              bandwidth: 1
##                  alpha: 1
##                  gamma: 1
##   negative.sample.rate: 5
##                      a: NA
##                      b: NA
##                 spread: 1
##                   seed: NA
##            knn.repeats: 1
##                verbose: FALSE
</code></pre>

<p>This object is a list with key-value pairs shown. To obtain some minimal information about each field, see the documentation in <code>help(umap.defaults)</code>, or see the original publication.</p>

<p>To create a custom configuration, create a copy of the defaults and then update any of the fields. For example, let&#39;s change the seed for random number generation.</p>

<pre><code class="r">custom.config = umap.defaults
custom.config$seed = 123
</code></pre>

<p>We can observe the changed settings by inspecting the object again (try it). To perform the UMAP projection with these settings, we can run the projection again and pass the configuration object as a second argument.</p>

<pre><code class="r">iris.umap.2 = umap(iris.data, custom.config)
plot.iris(iris.umap.2, iris.labels,
          main=&quot;Another UMAP visualization of the Iris dataset (different seed)&quot;)
</code></pre>

<p><img src="data:image/png;base64,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Jg5YbQ9yDMTRsbgN4sAkiYMdUnykaXCcAx/5Nk6ugzj6pOI4tQ7i6BNxQJFtEAdYc0AjDkg9tEEcveqgDeLoWds0iKNrxAGl8UaFOLpGHJCIAxJxQGtcB3H0j+MckIgDCkdIIREHJOJA3rNhG8TRM45zQGndBnF0rHUbxNGx1m0QR7+advFGHP1qXgdx9KvtNmUgjo613uMgjp4RByTigEQc0IgDBbxagcZxDvSJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIg5IxAGJOCARByTigEQckIgDEnFAIo5jXu6/H0McB7zexv9+D3Hs9/JaD+f7iGO/16/XQRz7ZeP4pUSIY7e4jdfwa3sfxLHLK9PGa5gr+Q3EsdUrk0UUx6/UQRwb6C5+c9eUONZa2QVx3M7qdQZx3MymLojjVm7bBnEsWwjhd9sgjmVLK4lMKq2H/CXEsURnMYfwoysP4lhU3qyMP1L5xTqIY9FSHNl1R+tBfwVxLFoTR351cnXEsYw1h0McEeKYEUdkXuir4/hc3HbYBxHHKqaDbBuFdUvTcR9DHOsstVHY8LQc9jHEsZVY7DqO69ZBHFsRR3bSuiO5ivxSL7RBHDeSLvWoBeK4sXipl9YaxHEz5RVHuY1LlUIcO0QLfXUb4wVXKYQ4Dlu9ObncpoY4jiu1IV/RtBnqNsRxnFxlFDc/TYa6DXEcJrcn4ixx3El5xaHqaDTYLYjjOLVKKMdxgTqI4zixtOVmhjjuZKEN4kCEOCAttUEc95VGcLk2iKOapTguUAdx1LK0VSGOG2OfA1qcAXFgthhH730QRzWL25XuVx/EUU9SwNXqII56dBy5KztEHPW4xf+KDqgTx82lq4lrbVeI4wSlNojj5ogD0kXbII4TXLUN4jjDNdMgjlMQByTigGZSIA4oV2qDOM52oTaI42zXSYM4TnehNojjdNdpgzigEQck4oBEHJCIAxJxQCIOSMQBiTggEQck4oBEHJCIAxJxQCIOSMQBiTggbYkDt0MckFbHAfyPOCARByTigEQckP4FseG06CAy3QQAAAAASUVORK5CYII=" alt="plot of chunk custom2"/></p>

<p>The result is slightly different due to a new instantiation of the random number generator.</p>

<h3>Additional arguments</h3>

<p>Another way to customize the algorithm is to specify the non-default parameters explicitly. To achieve equivalent results to the above, we can thus use</p>

<pre><code class="r">iris.umap.3 = umap(iris.data, seed=123)
</code></pre>

<p>The coordinates in this new output object should match the ones from <code>iris.umap.2</code> (check it!)</p>

<h2>Implementation</h2>

<p>The package provides two implementations of the umap method, one written in R and one accessed via an external python module.</p>

<p>The implementation written in R is the default. This implementation follows the design principles of the UMAP algorithm and its running time scales better-than-quadratically with the number of items (points) in a dataset. It is thus in principle suitable for use on datasets with thousands of points. However, it is not optimized for speed. It is the default because it should be functional without extensive dependencies and because its output provides insight into the inner workings of the algorithm.</p>

<p>The second available implementation is a wrapper for a python module with the same name. To enable this implementation, specify the argument <code>method</code>,</p>

<pre><code class="r">iris.umap.4 = umap(iris.data, method=&quot;python&quot;)
</code></pre>

<p>This command has several dependencies. To make it work, you must have the <code>reticulate</code> package installed and loaded (use <code>install.packages(&quot;reticulate&quot;)</code> and <code>library(reticulate)</code>). Furthermore, you must have the <code>umap-learn</code> python package installed (see the <a href="https://github.com/lmcinnes/umap">package repo</a> for instructions). If either of these components is not available, the above command will display an error message.</p>

<p>Note that it will not be possible to produce exactly the same output from the two implementations due to inequivalent random number generators in R and python.</p>

<p>&nbsp;</p>

<h2>Appendix</h2>

<p>The custom plot function used to visualize the Iris dataset:</p>

<pre><code class="r">plot.iris
</code></pre>

<pre><code>## function(x, labels,
##          main=&quot;A UMAP visualization of the Iris dataset&quot;,
##          pad=0.02, cex=0.65, pch=19,
##          cex.main=1, cex.legend=1) {
## 
##   layout = x$layout
##   par(mar=c(0.2,0.7,1.2,0.7), ps=10)
##   xylim = range(layout)
##   xylim = xylim + ((xylim[2]-xylim[1])*pad)*c(-0.5, 0.5)
##   plot(xylim, xylim, type=&quot;n&quot;, axes=F, frame=F)
##   xylim = par()$usr
##   rect(xylim[1], xylim[1], xylim[2], xylim[2], border=&quot;#aaaaaa&quot;, lwd=0.2)
##   points(layout[,1], layout[,2], col=iris.colors[as.integer(labels)],
##          cex=cex, pch=pch)
##   mtext(side=3, main, cex=cex.main)
## 
##   labels.u = unique(labels)
##   legend(&quot;topright&quot;, legend=as.character(labels.u),
##          col=iris.colors[as.integer(labels.u)],
##          bty=&quot;n&quot;, pch=pch, cex=cex.legend)
## }
## &lt;bytecode: 0x6a548c0&gt;
</code></pre>

<p>Summary of R session:</p>

<pre><code class="r">sessionInfo()
</code></pre>

<pre><code>## R version 3.4.1 (2017-06-30)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 16.04.4 LTS
## 
## Matrix products: default
## BLAS: /software/opt/R/R-3.4.1/lib/libRblas.so
## LAPACK: /software/opt/anaconda/anaconda3-4.4.0/lib/libmkl_intel_lp64.so
## 
## locale:
##  [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=C              
##  [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
##  [7] LC_PAPER=en_GB.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] umap_0.1.0.3
## 
## loaded via a namespace (and not attached):
##  [1] compiler_3.4.1   Matrix_1.2-12    magrittr_1.5     tools_3.4.1     
##  [5] reticulate_1.8   Rcpp_0.12.17     codetools_0.2-15 stringi_1.2.2   
##  [9] highr_0.6        grid_3.4.1       knitr_1.20       digest_0.6.15   
## [13] jsonlite_1.5     stringr_1.3.1    lattice_0.20-35  evaluate_0.10.1
</code></pre>

<p>&nbsp;</p>

</body>

</html>
