<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />

<meta name="viewport" content="width=device-width, initial-scale=1">



<title>Uniform Manifold Approximation and Projection in R</title>



<style type="text/css">code{white-space: pre;}</style>
<style type="text/css" data-origin="pandoc">
div.sourceCode { overflow-x: auto; }
table.sourceCode, tr.sourceCode, td.lineNumbers, td.sourceCode {
  margin: 0; padding: 0; vertical-align: baseline; border: none; }
table.sourceCode { width: 100%; line-height: 100%; }
td.lineNumbers { text-align: right; padding-right: 4px; padding-left: 4px; color: #aaaaaa; border-right: 1px solid #aaaaaa; }
td.sourceCode { padding-left: 5px; }
code > span.kw { color: #007020; font-weight: bold; } /* Keyword */
code > span.dt { color: #902000; } /* DataType */
code > span.dv { color: #40a070; } /* DecVal */
code > span.bn { color: #40a070; } /* BaseN */
code > span.fl { color: #40a070; } /* Float */
code > span.ch { color: #4070a0; } /* Char */
code > span.st { color: #4070a0; } /* String */
code > span.co { color: #60a0b0; font-style: italic; } /* Comment */
code > span.ot { color: #007020; } /* Other */
code > span.al { color: #ff0000; font-weight: bold; } /* Alert */
code > span.fu { color: #06287e; } /* Function */
code > span.er { color: #ff0000; font-weight: bold; } /* Error */
code > span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
code > span.cn { color: #880000; } /* Constant */
code > span.sc { color: #4070a0; } /* SpecialChar */
code > span.vs { color: #4070a0; } /* VerbatimString */
code > span.ss { color: #bb6688; } /* SpecialString */
code > span.im { } /* Import */
code > span.va { color: #19177c; } /* Variable */
code > span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code > span.op { color: #666666; } /* Operator */
code > span.bu { } /* BuiltIn */
code > span.ex { } /* Extension */
code > span.pp { color: #bc7a00; } /* Preprocessor */
code > span.at { color: #7d9029; } /* Attribute */
code > span.do { color: #ba2121; font-style: italic; } /* Documentation */
code > span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code > span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code > span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */

</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    for (var j = 0; j < rules.length; j++) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") continue;
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' || rule.style.backgroundColor === '') continue;
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>



<link href="data:text/css;charset=utf-8,body%20%7B%0Abackground%2Dcolor%3A%20%23fff%3B%0Amargin%3A%201em%20auto%3B%0Amax%2Dwidth%3A%20700px%3B%0Aoverflow%3A%20visible%3B%0Apadding%2Dleft%3A%202em%3B%0Apadding%2Dright%3A%202em%3B%0Afont%2Dfamily%3A%20%22Open%20Sans%22%2C%20%22Helvetica%20Neue%22%2C%20Helvetica%2C%20Arial%2C%20sans%2Dserif%3B%0Afont%2Dsize%3A%2014px%3B%0Aline%2Dheight%3A%201%2E35%3B%0A%7D%0A%23header%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0A%23TOC%20%7B%0Aclear%3A%20both%3B%0Amargin%3A%200%200%2010px%2010px%3B%0Apadding%3A%204px%3B%0Awidth%3A%20400px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Aborder%2Dradius%3A%205px%3B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Afont%2Dsize%3A%2013px%3B%0Aline%2Dheight%3A%201%2E3%3B%0A%7D%0A%23TOC%20%2Etoctitle%20%7B%0Afont%2Dweight%3A%20bold%3B%0Afont%2Dsize%3A%2015px%3B%0Amargin%2Dleft%3A%205px%3B%0A%7D%0A%23TOC%20ul%20%7B%0Apadding%2Dleft%3A%2040px%3B%0Amargin%2Dleft%3A%20%2D1%2E5em%3B%0Amargin%2Dtop%3A%205px%3B%0Amargin%2Dbottom%3A%205px%3B%0A%7D%0A%23TOC%20ul%20ul%20%7B%0Amargin%2Dleft%3A%20%2D2em%3B%0A%7D%0A%23TOC%20li%20%7B%0Aline%2Dheight%3A%2016px%3B%0A%7D%0Atable%20%7B%0Amargin%3A%201em%20auto%3B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dcolor%3A%20%23DDDDDD%3B%0Aborder%2Dstyle%3A%20outset%3B%0Aborder%2Dcollapse%3A%20collapse%3B%0A%7D%0Atable%20th%20%7B%0Aborder%2Dwidth%3A%202px%3B%0Apadding%3A%205px%3B%0Aborder%2Dstyle%3A%20inset%3B%0A%7D%0Atable%20td%20%7B%0Aborder%2Dwidth%3A%201px%3B%0Aborder%2Dstyle%3A%20inset%3B%0Aline%2Dheight%3A%2018px%3B%0Apadding%3A%205px%205px%3B%0A%7D%0Atable%2C%20table%20th%2C%20table%20td%20%7B%0Aborder%2Dleft%2Dstyle%3A%20none%3B%0Aborder%2Dright%2Dstyle%3A%20none%3B%0A%7D%0Atable%20thead%2C%20table%20tr%2Eeven%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Ap%20%7B%0Amargin%3A%200%2E5em%200%3B%0A%7D%0Ablockquote%20%7B%0Abackground%2Dcolor%3A%20%23f6f6f6%3B%0Apadding%3A%200%2E25em%200%2E75em%3B%0A%7D%0Ahr%20%7B%0Aborder%2Dstyle%3A%20solid%3B%0Aborder%3A%20none%3B%0Aborder%2Dtop%3A%201px%20solid%20%23777%3B%0Amargin%3A%2028px%200%3B%0A%7D%0Adl%20%7B%0Amargin%2Dleft%3A%200%3B%0A%7D%0Adl%20dd%20%7B%0Amargin%2Dbottom%3A%2013px%3B%0Amargin%2Dleft%3A%2013px%3B%0A%7D%0Adl%20dt%20%7B%0Afont%2Dweight%3A%20bold%3B%0A%7D%0Aul%20%7B%0Amargin%2Dtop%3A%200%3B%0A%7D%0Aul%20li%20%7B%0Alist%2Dstyle%3A%20circle%20outside%3B%0A%7D%0Aul%20ul%20%7B%0Amargin%2Dbottom%3A%200%3B%0A%7D%0Apre%2C%20code%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0Aborder%2Dradius%3A%203px%3B%0Acolor%3A%20%23333%3B%0Awhite%2Dspace%3A%20pre%2Dwrap%3B%20%0A%7D%0Apre%20%7B%0Aborder%2Dradius%3A%203px%3B%0Amargin%3A%205px%200px%2010px%200px%3B%0Apadding%3A%2010px%3B%0A%7D%0Apre%3Anot%28%5Bclass%5D%29%20%7B%0Abackground%2Dcolor%3A%20%23f7f7f7%3B%0A%7D%0Acode%20%7B%0Afont%2Dfamily%3A%20Consolas%2C%20Monaco%2C%20%27Courier%20New%27%2C%20monospace%3B%0Afont%2Dsize%3A%2085%25%3B%0A%7D%0Ap%20%3E%20code%2C%20li%20%3E%20code%20%7B%0Apadding%3A%202px%200px%3B%0A%7D%0Adiv%2Efigure%20%7B%0Atext%2Dalign%3A%20center%3B%0A%7D%0Aimg%20%7B%0Abackground%2Dcolor%3A%20%23FFFFFF%3B%0Apadding%3A%202px%3B%0Aborder%3A%201px%20solid%20%23DDDDDD%3B%0Aborder%2Dradius%3A%203px%3B%0Aborder%3A%201px%20solid%20%23CCCCCC%3B%0Amargin%3A%200%205px%3B%0A%7D%0Ah1%20%7B%0Amargin%2Dtop%3A%200%3B%0Afont%2Dsize%3A%2035px%3B%0Aline%2Dheight%3A%2040px%3B%0A%7D%0Ah2%20%7B%0Aborder%2Dbottom%3A%204px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Apadding%2Dbottom%3A%202px%3B%0Afont%2Dsize%3A%20145%25%3B%0A%7D%0Ah3%20%7B%0Aborder%2Dbottom%3A%202px%20solid%20%23f7f7f7%3B%0Apadding%2Dtop%3A%2010px%3B%0Afont%2Dsize%3A%20120%25%3B%0A%7D%0Ah4%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23f7f7f7%3B%0Amargin%2Dleft%3A%208px%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Ah5%2C%20h6%20%7B%0Aborder%2Dbottom%3A%201px%20solid%20%23ccc%3B%0Afont%2Dsize%3A%20105%25%3B%0A%7D%0Aa%20%7B%0Acolor%3A%20%230033dd%3B%0Atext%2Ddecoration%3A%20none%3B%0A%7D%0Aa%3Ahover%20%7B%0Acolor%3A%20%236666ff%3B%20%7D%0Aa%3Avisited%20%7B%0Acolor%3A%20%23800080%3B%20%7D%0Aa%3Avisited%3Ahover%20%7B%0Acolor%3A%20%23BB00BB%3B%20%7D%0Aa%5Bhref%5E%3D%22http%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0Aa%5Bhref%5E%3D%22https%3A%22%5D%20%7B%0Atext%2Ddecoration%3A%20underline%3B%20%7D%0A%0Acode%20%3E%20span%2Ekw%20%7B%20color%3A%20%23555%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Edt%20%7B%20color%3A%20%23902000%3B%20%7D%20%0Acode%20%3E%20span%2Edv%20%7B%20color%3A%20%2340a070%3B%20%7D%20%0Acode%20%3E%20span%2Ebn%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Efl%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Ech%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Est%20%7B%20color%3A%20%23d14%3B%20%7D%20%0Acode%20%3E%20span%2Eco%20%7B%20color%3A%20%23888888%3B%20font%2Dstyle%3A%20italic%3B%20%7D%20%0Acode%20%3E%20span%2Eot%20%7B%20color%3A%20%23007020%3B%20%7D%20%0Acode%20%3E%20span%2Eal%20%7B%20color%3A%20%23ff0000%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%0Acode%20%3E%20span%2Efu%20%7B%20color%3A%20%23900%3B%20font%2Dweight%3A%20bold%3B%20%7D%20%20code%20%3E%20span%2Eer%20%7B%20color%3A%20%23a61717%3B%20background%2Dcolor%3A%20%23e3d2d2%3B%20%7D%20%0A" rel="stylesheet" type="text/css" />

</head>

<body>




<h1 class="title toc-ignore">Uniform Manifold Approximation and Projection in R</h1>



<style>
h1.title {
  margin-top: 1em;
  margin-bottom: 1.5em;
}
h2, h3 {
  margin-top: 2em;
  margin-bottom: 0.7em;
}
p {
  font-size: 18px;
  margin-bottom: 0.7em;
}
pre {
  font-size: 16px;
  line-height: 1.5;
}
</style>
<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>Uniform Manifold Approximation and Projection (UMAP) is an algorithm for dimensional reduction proposed by <a href="https://arxiv.org/abs/1802.03426">McInnes and Healy</a>.</p>
<p>This vignette demonstrates how to use the <code>umap</code> R package to perform dimensional reduction and data trasnformations with the UMAP method. The vignette uses a small dataset as an example, but the package is suited to process larger data with many thousands of data points.</p>
</div>
<div id="usage" class="section level2">
<h2>Usage</h2>
<p>For a practical demonstration, let’s use the <a href="https://en.wikipedia.org/wiki/Iris_flower_data_set">Iris dataset</a>, <code>iris</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(iris, <span class="dv">3</span>)</code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width Species
## 1          5.1         3.5          1.4         0.2  setosa
## 2          4.9         3.0          1.4         0.2  setosa
## 3          4.7         3.2          1.3         0.2  setosa</code></pre>
<p>The first four columns contain data and the last column contains a label. It will be useful to separate those components.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris.data =<span class="st"> </span>iris[, <span class="kw">grep</span>(<span class="st">&quot;Sepal|Petal&quot;</span>, <span class="kw">colnames</span>(iris))]
iris.labels =<span class="st"> </span>iris[, <span class="st">&quot;Species&quot;</span>]</code></pre></div>
<div id="creating-a-projection" class="section level3">
<h3>Creating a projection</h3>
<p>Let’s now load the <code>umap</code> package and apply the UMAP transformation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">library</span>(umap)
iris.umap =<span class="st"> </span><span class="kw">umap</span>(iris.data)</code></pre></div>
<p>The output, <code>iris.umap</code>, is an object of class <code>umap</code>. We can get a minimal summary of its contents by just printing it.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris.umap</code></pre></div>
<pre><code>## umap embedding of 150 items in 2 dimensions
## object components: layout, data, knn, config</code></pre>
<p>The main component of the object is <code>layout</code>, which holds a matrix with coordinates.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">head</span>(iris.umap<span class="op">$</span>layout, <span class="dv">3</span>)</code></pre></div>
<pre><code>##          [,1]      [,2]
## [1,] 15.95804 -1.418806
## [2,] 17.80407 -1.531492
## [3,] 17.59992 -2.239721</code></pre>
<p>These coordinates can be used to visualize the dataset. (The custom plot function, <code>plot.iris</code>, is available at the end of this vignette.)</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot.iris</span>(iris.umap, iris.labels)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
</div>
<div id="projecting-new-data" class="section level3">
<h3>Projecting new data</h3>
<p>Once we have a <code>umap</code> object describing a projection of one dataset into a low-dimensional layout, it becomes possible to project other data onto the same manifold.</p>
<p>To perform the projection, we need a second dataset with the same data features as the training data. For this demonstration, let’s create such data by adding some noise to the original data.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris.wnoise =<span class="st"> </span>iris.data <span class="op">+</span><span class="st"> </span><span class="kw">matrix</span>(<span class="kw">rnorm</span>(<span class="dv">150</span><span class="op">*</span><span class="dv">40</span>, <span class="dv">0</span>, <span class="fl">0.1</span>), <span class="dt">ncol=</span><span class="dv">4</span>)
<span class="kw">colnames</span>(iris.wnoise) =<span class="st"> </span><span class="kw">colnames</span>(iris.data)
<span class="kw">head</span>(iris.wnoise, <span class="dv">3</span>)</code></pre></div>
<pre><code>##   Sepal.Length Sepal.Width Petal.Length Petal.Width
## 1     5.183373    3.525821     1.515123   0.3285499
## 2     4.872395    3.096451     1.467537   0.2094982
## 3     4.664500    3.150872     1.421417   0.2190057</code></pre>
<p>We can now request to arrange these perturbed observations onto the same layout as before. Following R’s design pattern for fitted models, this is performed via <code>predict</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris.wnoise.umap =<span class="st"> </span><span class="kw">predict</span>(iris.umap, iris.wnoise)
<span class="kw">head</span>(iris.wnoise.umap, <span class="dv">3</span>)</code></pre></div>
<pre><code>##       [,1]      [,2]
## 1 15.29473 -1.618880
## 2 17.85516 -1.482482
## 3 17.51304 -1.698629</code></pre>
<p>The output here is a matrix with coordinates. We can now visualize this new data alongside the original.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">plot.iris</span>(iris.umap, iris.labels)
<span class="kw">plot.iris</span>(iris.wnoise.umap, iris.labels, <span class="dt">add=</span>T, <span class="dt">pch=</span><span class="dv">4</span>,
          <span class="dt">legend.suffix=</span><span class="st">&quot; (with noise)&quot;</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>Note the new observations lie close to their original counterparts.</p>
</div>
</div>
<div id="tuning-umap" class="section level2">
<h2>Tuning UMAP</h2>
<p>The example above uses function <code>umap</code> with a single argument - the input dataset - so the embedding is performed with default settings. However, the algorithm can be tuned in several ways. There are two strategies for tuning: via configuration objects and via additional arguments.</p>
<div id="configuration-objects" class="section level3">
<h3>Configuration objects</h3>
<p>The default configuration object is called <code>umap.defaults</code>. This is a list encoding default values for all the parameters used within the algorithm.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">umap.defaults</code></pre></div>
<pre><code>## umap configuration parameters
##            n_neighbors: 15
##           n_components: 2
##                 metric: euclidean
##               n_epochs: 200
##                  input: data
##                   init: spectral
##               min_dist: 0.1
##       set_op_mix_ratio: 1
##     local_connectivity: 1
##              bandwidth: 1
##                  alpha: 1
##                  gamma: 1
##   negative_sample_rate: 5
##                      a: NA
##                      b: NA
##                 spread: 1
##           random_state: NA
##        transform_state: NA
##            knn_repeats: 1
##                verbose: FALSE
##        umap_learn_args: NA</code></pre>
<p>This object is a list with key-value pairs shown. To obtain some minimal information about each field, see the documentation in <code>help(umap.defaults)</code>, or see the original publication.</p>
<p>To create a custom configuration, create a copy of the defaults and then update any of the fields. For example, let’s change the seed for random number generation.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">custom.config =<span class="st"> </span>umap.defaults
custom.config<span class="op">$</span>random_state =<span class="st"> </span><span class="dv">123</span></code></pre></div>
<p>We can observe the changed settings by inspecting the object again (try it). To perform the UMAP projection with these settings, we can run the projection again and pass the configuration object as a second argument.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris.umap.<span class="dv">2</span> =<span class="st"> </span><span class="kw">umap</span>(iris.data, custom.config)
<span class="kw">plot.iris</span>(iris.umap.<span class="dv">2</span>, iris.labels,
          <span class="dt">main=</span><span class="st">&quot;Another UMAP visualization (different seed)&quot;</span>)</code></pre></div>
<p><img src="data:image/png;base64,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" /><!-- --></p>
<p>The result is slightly different than before due to a new instantiation of the random number generator.</p>
</div>
<div id="additional-arguments" class="section level3">
<h3>Additional arguments</h3>
<p>Another way to customize the algorithm is to specify the non-default parameters explicitly. To achieve equivalent results to the above, we can thus use</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris.umap.<span class="dv">3</span> =<span class="st"> </span><span class="kw">umap</span>(iris.data, <span class="dt">random_state=</span><span class="dv">123</span>)</code></pre></div>
<p>The coordinates in this new output object should match the ones from <code>iris.umap.2</code> (check it!)</p>
</div>
</div>
<div id="implementations" class="section level2">
<h2>Implementations</h2>
<p>The package provides two implementations of the umap method, one written in R and one accessed via an external python module.</p>
<p>The implementation written in R is the default. This implementation follows the design principles of the UMAP algorithm and its running time scales better-than-quadratically with the number of items (points) in a dataset. It is thus in principle suitable for use on datasets with thousands of points. It is the default because it should be functional without extensive dependencies.</p>
<p>The second available implementation is a wrapper for a python package <code>umap-learn</code>. To enable this implementation, specify the argument <code>method</code>.</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">iris.umap.<span class="dv">4</span> =<span class="st"> </span><span class="kw">umap</span>(iris.data, <span class="dt">method=</span><span class="st">&quot;umap-learn&quot;</span>)</code></pre></div>
<p>This command has several dependencies. You must have the <code>reticulate</code> package installed and loaded (use <code>install.packages(&quot;reticulate&quot;)</code> and <code>library(reticulate)</code>). Furthermore, you must have the <code>umap-learn</code> python package installed (see the <a href="https://github.com/lmcinnes/umap">package repo</a> for instructions). If either of these components is not available, the above command will display an error message.</p>
<p>A separate vignette explains additional aspects of interfacing with <code>umap-learn</code>, including handling of discrepancies between releases.</p>
<p>Note that it will not be possible to produce exactly the same output from the two implementations due to inequivalent random number generators in R and python, and due to slight discrepancies in the implementations.</p>
<p> </p>
</div>
<div id="appendix" class="section level2">
<h2>Appendix</h2>
<p>The custom plot function used to visualize the Iris dataset:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r">plot.iris</code></pre></div>
<pre><code>## function(x, labels,
##          main=&quot;A UMAP visualization of the Iris dataset&quot;,
##          colors=c(&quot;#ff7f00&quot;, &quot;#e377c2&quot;, &quot;#17becf&quot;),
##          pad=0.1, cex=0.65, pch=19, add=FALSE, legend.suffix=&quot;&quot;,
##          cex.main=1, cex.legend=1) {
## 
##   layout = x
##   if (class(x)==&quot;umap&quot;) {
##     layout = x$layout
##   } 
##   
##   xylim = range(layout)
##   xylim = xylim + ((xylim[2]-xylim[1])*pad)*c(-0.5, 0.5)
##   if (!add) {
##     par(mar=c(0.2,0.7,1.2,0.7), ps=10)
##     plot(xylim, xylim, type=&quot;n&quot;, axes=F, frame=F)
##     rect(xylim[1], xylim[1], xylim[2], xylim[2], border=&quot;#aaaaaa&quot;, lwd=0.25)  
##   }
##   points(layout[,1], layout[,2], col=colors[as.integer(labels)],
##          cex=cex, pch=pch)
##   mtext(side=3, main, cex=cex.main)
## 
##   labels.u = unique(labels)
##   legend.pos = &quot;topright&quot;
##   legend.text = as.character(labels.u)
##   if (add) {
##     legend.pos = &quot;bottomright&quot;
##     legend.text = paste(as.character(labels.u), legend.suffix)
##   }
##   legend(legend.pos, legend=legend.text,
##          col=colors[as.integer(labels.u)],
##          bty=&quot;n&quot;, pch=pch, cex=cex.legend)
## }
## &lt;bytecode: 0xc6d5658&gt;</code></pre>
<p>Summary of R session:</p>
<div class="sourceCode"><pre class="sourceCode r"><code class="sourceCode r"><span class="kw">sessionInfo</span>()</code></pre></div>
<pre><code>## R version 3.5.1 (2018-07-02)
## Platform: x86_64-pc-linux-gnu (64-bit)
## Running under: Ubuntu 16.04.6 LTS
## 
## Matrix products: default
## BLAS: /software/opt/R/R-3.5.1/lib/libRblas.so
## LAPACK: /software/opt/R/R-3.5.1/lib/libRlapack.so
## 
## locale:
##  [1] LC_CTYPE=en_GB.UTF-8       LC_NUMERIC=C              
##  [3] LC_TIME=en_GB.UTF-8        LC_COLLATE=C              
##  [5] LC_MONETARY=en_GB.UTF-8    LC_MESSAGES=en_GB.UTF-8   
##  [7] LC_PAPER=en_GB.UTF-8       LC_NAME=C                 
##  [9] LC_ADDRESS=C               LC_TELEPHONE=C            
## [11] LC_MEASUREMENT=en_GB.UTF-8 LC_IDENTIFICATION=C       
## 
## attached base packages:
## [1] stats     graphics  grDevices utils     datasets  methods   base     
## 
## other attached packages:
## [1] umap_0.2.2.0
## 
## loaded via a namespace (and not attached):
##  [1] Rcpp_1.0.1      lattice_0.20-38 digest_0.6.18   RSpectra_0.14-0
##  [5] grid_3.5.1      jsonlite_1.6    magrittr_1.5    evaluate_0.13  
##  [9] stringi_1.4.3   Matrix_1.2-16   reticulate_1.12 rmarkdown_1.11 
## [13] tools_3.5.1     stringr_1.4.0   xfun_0.4        yaml_2.2.0     
## [17] compiler_3.5.1  htmltools_0.3.6 knitr_1.21</code></pre>
<p> </p>
</div>



<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
